<!DOCTYPE html>
<html lang="de">

<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schicht erstellen</title>
</head>

<body>
    <div class="header">Turnverein St. Ingbert</div>

    <div class="menu" onclick="toggleMenu()">☰</div>
    <ul class="menu-list" id="menuList">
        <li onclick="Start()">Schichtplan</li>
    </ul>

    <form id="eventForm">
        <!-- Veranstaltung -->
        <div class="Name_der_veranstaltung">
            <label for="eventName">Name der Veranstaltung</label>
            <input type="text" id="eventName" required>
        </div>

        <div class="Anzeige_der_veranstaltung">
            <input type="checkbox" id="showEvent" checked>
            <label for="showEvent">Veranstaltung anzeigen</label>
        </div>

        <div class="Eintragen_Erlauben">
            <input type="checkbox" id="registerOnEvent" checked>
            <label for="registerOnEvent">Eintragung erlauben</label>
        </div>

        <!-- Bereich für dynamisch hinzufügbare Tage -->
        <div id="daysContainer"></div>

        <button type="button" class="btn-orange" onclick="addDay()">+ Tag hinzufügen</button>
        <button type="submit" class="btn-green">Absenden</button>
    </form>

    <script>
        let dayCount = 0;

        function addDay() {
            const container = document.getElementById('daysContainer');

            const dayDiv = document.createElement('div');
            dayDiv.classList.add('day-block');

            dayDiv.innerHTML = `
        <strong>Datum:</strong>
        <div style="display: flex; align-items: center; gap: 10px;">
            <input type="date" required>
            <button type="button" class="btn-red small" onclick="this.closest('.day-block').remove()">Entfernen</button>
        </div>

        <div class="servicesContainer"></div>
        <button type="button" class="btn-orange" onclick="addService(this)">+ Dienst hinzufügen</button>`;

            container.appendChild(dayDiv);
        }
        function addService(button) {
            const servicesContainer = button.previousElementSibling;

            // Neues div für den Dienst (Schicht)
            const serviceDiv = document.createElement('div');
            serviceDiv.classList.add('service-block');

            serviceDiv.innerHTML = `
        <div class="service-header">
            <strong>Dienst</strong>
        </div>
        <label>Schichtbeschreibung:</label>
        <input type="text" required>
        <label>Startzeit:</label>
        <input type="time" required>
        <label>Endzeit:</label>
        <input type="time" required>
        <button type="button" class="btn-red small" onclick="this.closest('.service-block').remove()">Entfernen</button>
        <div class="tasksContainer"></div>
        <button type="button" class="btn-orange small" onclick="addTask(this)">+ Aufgabe hinzufügen</button>`;

            servicesContainer.appendChild(serviceDiv);
        }

        // addTask erstellt ein neues Aufgaben-Element innerhalb eines Dienstes
        function addTask(button) {
            const tasksContainer = button.previousElementSibling;

            // Neues div für die Aufgabe
            const taskDiv = document.createElement('div');
            taskDiv.classList.add('task-block');

            taskDiv.innerHTML = `
        <div class="task-header">
            <strong>Aufgabe</strong>
        </div>
        <label>Aufgabe:</label>
        <input type="text" required>
        <label>Benötigte Personen:</label>
        <input type="number" min="1" step="1" required>
        <button type="button" class="btn-red small" onclick="this.closest('.task-block').remove()">Entfernen</button>`;
            tasksContainer.appendChild(taskDiv);
        }

        
        document.getElementById('eventForm').addEventListener('submit', function (e) {
            e.preventDefault();

        });

        function toggleMenu() {
            const menu = document.getElementById('menuList');
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }

        function Start() {
            window.location.href = "Seite.html";
        }
    </script>
</body>

</html>